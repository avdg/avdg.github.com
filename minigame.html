<!DOCTYPE html>
<html><head><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script><script type="text/javascript">(function(){var t,i,o,e,s,l,n,c,r,h,a,u,k,f
r={locale:!1,debug:!1,style:"srs"},i={_:!1,blockTypes:"ijlotsz".split(""),blocks:{srs:{rotate:function(t){return[t[1],-t[0]]},derotate:function(t){return[-t[1],t[0]]},opposite:function(t){return[-t[0],-t[1]]},initials:{i:[[0,-1],[0,0],[0,1],[0,2]],j:[[-1,-1],[0,-1],[0,0],[0,1]],l:[[0,-1],[0,0],[0,1],[-1,1]],o:[[-1,0],[0,0],[-1,1],[0,1]],s:[[0,-1],[0,0],[-1,0],[-1,1]],t:[[-1,0],[0,-1],[0,0],[0,1]],z:[[-1,-1],[-1,0],[0,0],[0,1]]},kickTable:{right:{o:[[],[],[],[]],i:[[[-2,0],[1,0],[-2,-1],[1,2]],[[-1,0],[2,0],[-1,2],[2,-1]],[[2,0],[-1,0],[2,1],[-1,-2]],[[1,0],[-2,0],[1,-2],[-2,1]]],"default":[[[-1,0],[-1,1],[0,-2],[-1,-2]],[[1,0],[1,-1],[0,2],[1,2]],[[1,0],[1,1],[0,-2],[1,-2]],[[-1,0],[-1,-1],[0,2],[-1,2]]]},left:{o:[[],[],[],[]],i:[[[2,0],[-1,0],[2,1],[-1,-2]],[[1,0],[-2,0],[1,-2],[-2,1]],[[-2,0],[1,0],[-2,-1],[1,2]],[[-1,0],[2,0],[-1,2],[2,-1]]],"default":[[[1,0],[1,-1],[0,2],[1,2]],[[-1,0],[-1,1],[0,-2],[-1,2]],[[-1,0],[-1,-1],[0,2],[-1,2]],[[1,0],[1,1],[0,-2],[1,-2]]]}},offsets:{i:[[[0,0],[-1,0],[2,0],[-1,0],[2,0]],[[-1,0],[0,0],[0,0],[0,1],[0,-2]],[[-1,2],[1,1],[-2,1],[1,0],[-2,0]],[[0,1],[0,1],[0,1],[0,-1],[0,2]]],o:[[[0,0]],[[0,-1]],[[-1,-1]],[[-1,0]]],"default":[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,1],[0,2],[-1,2]]]},color:{i:"rgba(0,255,255,.9)",j:"rgba(0,0,255,.9)",l:"rgba(255,170,0,.9)",o:"rgba(255,255,0,.9)",s:"rgba(0,255,0,.9)",t:"rgba(153,0,255,.9)",z:"rgba(255,0,0,.9)"},blocks:{}}},images:{cache:{},links:{clown:"http://tweakers.net/ext/f/QiUS8Q3QxzG4yC76TOl0RSHI/full.jpg",nature:"http://www.finewallpaperss.com/wp-content/uploads/2012/09/green-nature-wallpaper1.jpg"},offline:{clown:"img/clown.jpg",nature:"img/green-nature-wallpaper.jpg"}}},n=function(){var t,o,e,s,n,c,r,h,a,u,k
if(!i._){for(l("clown"),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()),a=i.blockTypes,n=0,h=a.length,k=1;h>n;n+=k)for(t=a[n],s=i.blocks.srs.initials[t].slice(0),i.blocks.srs.blocks[t]=[],o=c=0;4>c;o=c+=1)for(i.blocks.srs.blocks[t][o]=$.extend(!0,[],s),e=r=0,u=i.blocks.srs.initials[t].length;u>r;e=r+=1)s[e]=i.blocks.srs.rotate(s[e])
i._=!0}},t=function(){function t(){this.achievements={}}return t.prototype.add=function(t,i){this.achievement[t]={msg:i,unlocked:!1}},t.prototype.unlock=function(t){return(this.achievement[t].unlocked=!1)?(this.achievement[t].unlocked=!0,!0):!1},t.prototype.unlocked=function(t){return this.achievement[t].unlocked},t}(),k=function(){function t(){this.resetState(!0)}return t.prototype.resetState=function(t){var i,o,e,s,l
for(null==t&&(t=!1),this.activeBlock={block:null,rotation:null,w:null,h:null},this.display=[],this.wall=0,this.lineOffsets=[],this.hold=null,this.holdDisabled=!1,this.holdLock=!1,this.queue=[],this.totalLines=0,t&&(this.settings=$.extend(!0,{},r)),this.rotationStyle="srs",i=e=0;24>e;i=++e)for(this.display[i]=[],o=s=0;10>s;o=++s)this.display[i][o]=null
for(i=l=0;20>l;i=++l)this.lineOffsets[i]=0
this.fillQueue(),this.nextBlock()},t.prototype.fillQueue=function(t){for(null==t&&(t=7);t>this.queue.length;)this.queue=this.queue.concat(h(i.blockTypes))},t.prototype.nextBlock=function(t,i){var o,e
for(null==t&&(t=1),null==i&&(i=7),o=e=0;t>e;o=e+=1)this.activeBlock.block=this.queue.shift(),this.activeBlock.rotation=0,this.activeBlock.h=18,this.activeBlock.w=4,i>this.queue.length&&this.fillQueue(i)},t.prototype.tryActiveBlockPosition=function(t,i,o){var e,s,l
for(e=s=0,l=o.length;l>s;e=s+=1){if(0>i-o[e][0]||i-o[e][0]>=20)return!1
if(0>t+o[e][1]||t+o[e][1]>=10)return!1
if(null!==this.display[i-o[e][0]][t+o[e][1]])return!1}return!0},t.prototype.storeBlock=function(){var t
this.holdDisabled||this.holdLock||(null===this.hold?(this.hold=this.activeBlock.block,this.nextBlock()):(t=[this.activeBlock.block,this.hold],this.hold=t[0],this.activeBlock.block=t[1],this.activeBlock.rotation=0,this.activeBlock.h=18,this.activeBlock.w=4),this.holdLock=!0,this.updateDisplay())},t.prototype.moveLeft=function(){this.tryActiveBlockPosition(this.activeBlock.w-1,this.activeBlock.h,i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation])&&(this.activeBlock.w-=1,this.updateDisplay())},t.prototype.moveRight=function(){this.tryActiveBlockPosition(this.activeBlock.w+1,this.activeBlock.h,i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation])&&(this.activeBlock.w+=1,this.updateDisplay())},t.prototype.moveDown=function(){this.tryActiveBlockPosition(this.activeBlock.w,this.activeBlock.h-1,i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation])?(this.activeBlock.h-=1,this.updateDisplay()):this.lock()},t.prototype.doDrop=function(){for(;this.tryActiveBlockPosition(this.activeBlock.w,this.activeBlock.h-1,i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation]);)this.activeBlock.h-=1
this.lock()},t.prototype.rotateRight=function(){var t
t=(this.activeBlock.rotation+1)%4,this.tryActiveBlockPosition(this.activeBlock.w,this.activeBlock.h,i.blocks.srs.blocks[this.activeBlock.block][t])&&(this.activeBlock.rotation=t,this.updateDisplay())},t.prototype.rotateLeft=function(){var t
t=(this.activeBlock.rotation+3)%4,this.tryActiveBlockPosition(this.activeBlock.w,this.activeBlock.h,i.blocks.srs.blocks[this.activeBlock.block][t])&&(this.activeBlock.rotation=t,this.updateDisplay())},t.prototype.lock=function(){var t,o,e,s
for(this.holdLock=!1,t=i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation],o=e=0,s=t.length;s>e;o=e+=1)this.display[this.activeBlock.h-t[o][0]][this.activeBlock.w+t[o][1]]=i.blocks.srs.color[this.activeBlock.block]
this.removeLines(),this.nextBlock(),this.tryActiveBlockPosition(this.activeBlock.w,this.activeBlock.h,i.blocks.srs.blocks[this.activeBlock.block][this.activeBlock.rotation])||this.resetState(),this.updateDisplay()},t.prototype.removeLines=function(){var t,i,o,e,s,l,n,c
for(e=0,i=s=0,n=this.display.length;n>s;i=s+=1){for(t=!0,o=l=0,c=this.display[i].length;c>l;o=l+=1)this.display[i-e][o]=this.display[i][o],null===this.display[i][o]&&(t=!1)
t&&(e+=1)}this.totalLines+=e,this.updateDisplay()},t.prototype.updateDisplay=function(){},t.prototype.gameOver=function(){},t}(),o=function(){function t(t,i,o,e,s,l){this.resetSettings(),this.x=t,this.y=i,this.w=o,this.h=e,this.c=s,this.s=l,this.c.lineWidth=0}return t.prototype.resetSettings=function(){this.options={defaultClearColor:"rgb(255, 255, 255)",defaultBlockColor:"rgba(0, 0, 0, .5)",defaultBgColor:"rgb(0, 0, 0)",defaultBlockBgColor:"rgba(255, 255, 255, .3)",defaultGridBgColor:"rgba(255, 255, 255, .5)",image:"clown",rows:20,cols:10}},t.prototype.clearScreen=function(t){null==t&&(t=this.options.defaultClearColor),this.c.fillStyle=t,this.c.fillRect(this.x,this.y,this.w,this.h)},t.prototype.drawImageBackground=function(t,i,o,e,s){var n,c,r,h,a,u,k
null==s&&(s={}),r=24,c=o/r,n=e/r,a=c/2,h=l(null!=(u=s.image)?u:this.options.image),this.c.beginPath(),this.c.strokeStyle=this.c.fillStyle=null!=(k=s.defaultBgColor)?k:this.options.defaultBgColor,this.c.lineWidth=1,this.c.moveTo(t+2*c,i+n),this.c.arcTo(t+23*c,i+n,t+23*c,i+2*n,a),this.c.arcTo(t+23*c,i+23*n,t+22*c,i+23*n,a),this.c.arcTo(t+c,i+23*n,t+c,i+22*n,a),this.c.arcTo(t+c,i+n,t+2*c,i+n,a),this.c.closePath(),this.c.clip(),this.c.drawImage(h,t+c,i+n,o-c,e-n),this.c.restore(),this.c.lineWidth=0},t.prototype.drawGameGrid=function(t,o,e,s,l){var n,c,r,h,a,u,k,f,p,d,y,v,w,g,B,b,m,D,x,C
for(null==l&&(l={}),d=null!=(b=l.rows)?b:this.options.rows,r=null!=(m=l.cols)?m:this.options.cols,h=null!=(D=l.defaultBlockColor)?D:this.options.defaultBlockColor,a=null!=(x=l.defaultGridBgColor)?x:this.options.defaultGridBgColor,n=s/d,c=e/r,this.c.fillStyle=a,this.c.fillRect(t,o,e,s),this.c.fillStyle=h,k=y=0;d>y;k=y+=1)for(f=v=0;r>v;f=v+=1)this.c.fillRect(t+c*f+1,o+n*k+1,c-2,n-2)
for(p=0,u=n,k=w=0;d>w&&(p+=n+this.s.lineOffsets[k],p<=s+.05);k=w+=1){for(p+n>s+.05&&(u=p+n-s),f=g=0;r>g;f=g+=1)null!==this.s.display[k][f]&&(this.c.fillStyle=this.s.display[k][f],this.c.fillRect(t+c*f+1,o+s-p+1,c-2,u-2))
for(f=B=0,C=i.blocks.srs.blocks[this.s.activeBlock.block][this.s.activeBlock.rotation].length;C>B;f=B+=1)this.s.activeBlock.h-i.blocks.srs.blocks[this.s.activeBlock.block][this.s.activeBlock.rotation][f][0]===k&&(this.c.fillStyle=i.blocks.srs.color[this.s.activeBlock.block],this.c.fillRect(t+c*(i.blocks.srs.blocks[this.s.activeBlock.block][this.s.activeBlock.rotation][f][1]+this.s.activeBlock.w)+1,o+s-p+1,c-2,c-2))}},t.prototype.drawBox=function(t,o,e,s,l,n){var c,r,h,a,u,k,f,p,d,y,v,w,g,B,b,m,D,x,C,S,P
if(null==n&&(n={}),a=null!=(m=n.defaultBlockBgColor)?m:this.options.defaultBlockBgColor,h=e/4,r=s/4,"string"==typeof l?(c=null!=(D=null!=(x=n.blockColor)?x:i.blocks.srs.color[l])?D:this.options.defaultBlockColor,l=i.blocks.srs.blocks[l][0]):c=null!=(C=n.blockColor)?C:this.options.defaultBlockColor,this.c.fillStyle=a,this.c.fillRect(t,o,e,s),null!==l){for(d=f=l[0][0],y=p=l[0][1],k=B=1,S=l.length;S>B;k=B+=1)d>l[k][0]?d=l[k][0]:l[k][0]>f&&(f=l[k][0]),y>l[k][1]?y=l[k][1]:l[k][1]>p&&(p=l[k][1])
for(g=p-y+1,u=f-d+1,v=(4-g)/2*h,w=(4-u)/2*r,this.c.fillStyle=c,k=b=0,P=l.length;P>b;k=b+=1)this.c.fillRect(t+v+(l[k][1]-y)*h+1,o+w+(l[k][0]-d)*r+1,h-2,r-2)}},t.prototype.draw=function(){var t,i,o
o=(new Date).getDate(),i=this.w/24,t=this.h/24,this.clearScreen(),this.drawImageBackground(this.x,this.y,this.w,this.h),this.drawGameGrid(this.x+7*i,this.y+2*t,10*i,20*t),this.drawBox(this.x+18*i,this.y+2*t,4*i,4*t,this.s.queue[0]),this.drawBox(this.x+18*i,this.y+7*t,4*i,4*t,this.s.queue[1]),this.drawBox(this.x+18*i,this.y+12*t,4*i,4*t,this.s.queue[2]),this.drawBox(this.x+18*i,this.y+17*t,4*i,4*t,this.s.queue[3]),this.drawBox(this.x+2*i,this.y+2*t,4*i,4*t,this.s.hold),r.debug&&console.debug((new Date).getDate()-o+" ms spend drawing")},t}(),c=function(){function t(t){null==t&&(t=!0),this.keys={keyUp:{},keyDown:{},keyPress:{}},t&&this.registerEventHandlers()}return t.prototype.registerEventHandlers=function(){var t=this
document.onkeydown=function(i){return t.onKeyDown(i)},document.onkeyup=function(i){return t.onKeyUp(i)},document.onKeyPress=function(i){return t.onKeyPress(i)}},t.prototype.registerKeyDown=function(t,i){this.keys.keyDown[t]=i},t.prototype.registerKeyUp=function(t,i){this.keys.keyUp[t]=i},t.prototype.registerKeyPress=function(t,i){this.keys.keyPress[t]=i},t.prototype.onKeyDown=function(t){var i
return i=t.which,"function"==typeof this.keys.keyDown[i]?this.keys.keyDown[i](t):"function"==typeof this.keys.keyDown["default"]?this.keys.keyDown["default"]:void 0},t.prototype.onKeyUp=function(t){var i
return i=t.which,"function"==typeof this.keys.keyUp[i]?this.keys.keyUp[i](t):"function"==typeof this.keys.keyUp["default"]?this.keys.keyUp["default"]:void 0},t.prototype.onKeyPress=function(t){var i
return i=t.which,"function"==typeof this.keys.keyPress[i]?this.keys.keyPress[i](t):"function"==typeof this.keys.keyPress["default"]?this.keys.keyPress["default"]:void 0},t.prototype.getKeyCode=function(){},t}(),h=function(t){var i,o,e,s,l,n
for(e=$.extend(!0,[],t),i=l=1,n=e.length;n>l;i=l+=1)o=Math.floor(Math.random()*(i+1)),s=e[i],e[i]=e[o],e[o]=s
return e},s=function(t,i){for(var o;0!==i;)o=[i,t%i],t=o[0],i=o[1]
return t},u=function(t,i,o,e){return o/e>t/i?e=i*o/t:o=t*e/i,[o,e]},a=function(t,i,o,e){return o/e>t/i?(o-=o%s(t,i),e=i*o/t):(e-=e%s(i,t),o=t*e/i),[o,e]},l=function(t){return i.images.cache[t]||(i.images.cache[t]=new Image,i.images.cache[t].src=i.images[r.locale?"offline":"links"][t],i.images.cache[t])},f=function(){function t(t){var e=this
n(),null==t&&(t="game"),this.c=document.getElementById(t).getContext("2d"),this.state=new k,r.debug&&(this.cache=i),this.drawer=new o(0,0,this.c.canvas.width,this.c.canvas.height,this.c,this.state),this.keyHandler=new c,this.doDraw=!1,this.state.updateDisplay=function(){e.doDraw===!1&&(window.requestAnimationFrame(function(){return e.doDraw=!1,e.drawer.draw()}),e.doDraw=!0)},this.keyHandler.registerKeyDown(37,function(t){return e.state.moveLeft(),t.preventDefault(),!1}),this.keyHandler.registerKeyDown(38,function(t){return e.state.rotateRight(),t.preventDefault(),!1}),this.keyHandler.registerKeyDown(39,function(t){return e.state.moveRight(),t.preventDefault(),!1}),this.keyHandler.registerKeyDown(40,function(t){return e.state.moveDown(),t.preventDefault(),!1}),this.keyHandler.registerKeyDown(32,function(t){return e.state.doDrop(),t.preventDefault(),!1}),this.keyHandler.registerKeyDown(16,function(t){return e.state.storeBlock(),t.preventDefault(),!1}),setTimeout(function(){return e.draw()},50)}return t.prototype.draw=function(){this.drawer.draw()},t}(),e=null,$(document).ready(function(){var t
t=(new Date).getDate(),window.game=e=new f,r.debug&&console.debug((new Date).getDate()-t+" ms to launch game")})}).call(this)
var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-37350177-1']);_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body><canvas id="game" width="528" height="528"></canvas></body></html>